@model _365Plus.Web.Models.RegisterViewModel

@{
    Html.EnableClientValidation();
    Html.EnableUnobtrusiveJavaScript();
}

@using (Ajax.BeginForm("Register", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, new AjaxOptions
{
    HttpMethod = "POST",
    UpdateTargetId = "divRegister",
    InsertionMode = InsertionMode.Replace,
    OnBegin = "OnRegisterBegin",
    OnSuccess = "OnRegisterSuccess",
    OnFailure = "OnRegisterFailure"
}, new { @class = "form", role = "form" }))
{
    @Html.AntiForgeryToken()
    <h4>Create a new account.</h4>
    <hr />
    @Html.ValidationSummary("", new { @class = "text-danger" })
    <div class="form-group">
        @Html.LabelFor(m => m.Email, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Password, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" class="btn btn-default" value="Register" />
        </div>
    </div>
}
  
    <script type="text/javascript">
        function OnRegisterBegin(e) {
            $("#login-modal").block({
                css: {
                    border: 'none',
                    padding: '15px',
                    backgroundColor: '#000',
                    '-webkit-border-radius': '10px',
                    '-moz-border-radius': '10px',
                    opacity: .5,
                    color: '#fff',
                    baseZ: 9999
                }
            });
        }

        function OnRegisterSuccess(e) {
            $.unblockUI;
            if (typeof (e.SignInStatus) != 'undefined' && e.SignInStatus == 0)
                window.location = e.ReturnUrl;
        }

        function OnRegisterFailure(e) {
        }
    </script>

